p: &p
  type: http
  interval: 86400
  health-check:
    enable: true
    url: http://www.gstatic.com/generate_204
    interval: 300
    timeout: 5000

proxy-providers:
  Subscribe:
    url: https://gist.githubusercontent.com/crane557/2da1d3ccbd066e8f8eeaf4bc4586ee8f/raw/SS
    path: ./providers/Subscribe.yaml
    <<: *p

mixed-port: 7893
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false
external-controller: 0.0.0.0:9090
external-ui: "/usr/share/openclash/dashboard"
secret: ""

tcp-concurrent: true
unified-delay: true
global-client-fingerprint: chrome
find-process-mode: strict

#geodata-mode: true
#geox-url:
  #geoip: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/geoip/release/geoip.dat"
  #geosite: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  #mmdb: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb"
  #asn: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/geoip/release/GeoLite2-ASN.mmdb"

profile:
  store-selected: true
  store-fake-ip: false

sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]

tun:
  enable: true
  stack: system
  auto-route: true
  auto-detect-interface: true
  dns-hijack: [any:53]

dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  listen: 0.0.0.0:1053
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '+.lan'
    - '+.local'
    - '+.direct'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 8.8.8.8

pg: &pg
  type: select
  proxies:
    - æ‰‹åŠ¨åˆ‡æ¢
    - DIRECT

url-test: &url-test
  type: url-test
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 50
  include-all: true

select: &select
  type: select
  include-all: true

fallback: &fallback
  type: fallback
  url: http://www.gstatic.com/generate_204
  interval: 300
  include-all: true

load-balance: &load-balance
  type: load-balance
  strategy: consistent-hashing
  url: http://www.gstatic.com/generate_204
  interval: 300
  include-all: true

c: &c
  type: http
  behavior: classical
  format: text
  interval: 86400

proxy-groups:
  - name: æ‰‹åŠ¨åˆ‡æ¢
    type: select
    include-all: true
    proxies: [DIRECT]
    use: [Subscribe]
  - name: å›½å¤–ç½‘ç«™
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: å›½é™…åª’ä½“
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: å¾®è½¯æœåŠ¡
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: è°·æ­ŒæœåŠ¡
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: ç”µæŠ¥æ¶ˆæ¯
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: TikTok
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: Gemini
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: AI
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: TalkTone
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: PayPal
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
  - name: é¦™æ¸¯èŠ‚ç‚¹
    <<: *url-test
    use: [Subscribe]
    filter: "(?i)ðŸ‡­ðŸ‡°|é¦™æ¸¯|HK|(\b(HK|Hong)\b)"
  - name: ç¾Žå›½èŠ‚ç‚¹
    <<: *url-test
    use: [Subscribe]
    filter: "(?i)ðŸ‡ºðŸ‡¸|ç¾Žå›½|LA|SJC|(\b(US|United States)\b)"
  - name: å…œåº•åˆ†æµ
    <<: *pg
    use: [Subscribe]
    proxies:
      - æ‰‹åŠ¨åˆ‡æ¢
      - DIRECT
      - é¦™æ¸¯èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹

rule-providers:
  AD:
    <<: *c
    path: ./rules/AD.list
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Reject.list
  YouTube:
    <<: *c
    path: ./rules/YouTube.list
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/YouTube.list
  Google:
    <<: *c
    path: ./rules/Google.list
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Google.list
  Telegram:
    <<: *c
    path: ./rules/Telegram.list
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Telegram.list
  Gemini:
    <<: *c
    path: ./rules/Gemini.list
    url: https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Clash/Gemini/Gemini.list
  AI:
    <<: *c
    path: ./rules/AI.list
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/AI.list
  TikTok:
    <<: *c
    path: ./rules/TikTok.list
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/TikTok.list
  TalkTone:
    <<: *c
    path: ./rules/TalkTone.list
    url: https://github.com/Acacia415/surge/raw/main/TalkaTone.list
  PayPal:
    <<: *c
    path: ./rules/PayPal.list
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/PayPal.list

rules:
  - DOMAIN-SUFFIX,cn.bing.com,DIRECT
  - DOMAIN-SUFFIX,18comic.vip,é¦™æ¸¯èŠ‚ç‚¹
  - DOMAIN-SUFFIX,hanime1.me,é¦™æ¸¯èŠ‚ç‚¹
  - DOMAIN-SUFFIX,yxvm.com,DIRECT
  - DOMAIN-SUFFIX,nodeseek.com,é¦™æ¸¯èŠ‚ç‚¹
  - RULE-SET,AD,REJECT
  - GEOIP,private,DIRECT
  - GEOIP,cn,DIRECT
  - GEOSITE,microsoft,å¾®è½¯æœåŠ¡
  - GEOSITE,onedrive,å¾®è½¯æœåŠ¡
  - GEOSITE,github,å¾®è½¯æœåŠ¡
  - RULE-SET,TikTok,TikTok
  - RULE-SET,YouTube,å›½é™…åª’ä½“
  - RULE-SET,Gemini,Gemini
  - RULE-SET,AI,AI
  - RULE-SET,Google,è°·æ­ŒæœåŠ¡
  - RULE-SET,Telegram,ç”µæŠ¥æ¶ˆæ¯
  - GEOSITE,gfw,å›½å¤–ç½‘ç«™
  - RULE-SET,TalkTone,TalkTone
  - RULE-SET,PayPal,PayPal
  - MATCH,å…œåº•åˆ†æµ
